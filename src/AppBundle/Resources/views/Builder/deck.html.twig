{% extends 'AppBundle::layout.html.twig' %}

{% block javascripts %}
{% javascripts 
	'@AppBundle/Resources/public/js/app.draw_simulator.js'
	'@AppBundle/Resources/public/js/app.card_modal.js'
	'@AppBundle/Resources/public/js/app.smart_filter.js'
	'@AppBundle/Resources/public/js/app.suggestions.js'
	'@AppBundle/Resources/public/js/app.diff.js'
	'@AppBundle/Resources/public/js/app.deck.js' %}
	<script src="{{ asset_url }}"></script>
{% endjavascripts %}
<script type="text/javascript">
var deck_json = {{ deck|json_encode|raw }};
console.log(deck_json);
</script>
{% endblock %}

{% block body %}
<div class="container deck">

{% if deck.unsaved %}
<div class="alert alert-danger" role="alert" id="deck-unsaved-alert"><span class="glyphicon glyphicon-warning-sign"></span> This deck has unsaved changes. Please save the deck or cancel the changes before making further edits.</div>
{% endif %}

<div class="row">

<!-- Left-side Column -->
<div class="col-md-6">

<div id="deck">
<!-- Identity and Stats -->
<div class="row">
	<div class="col-sm-3 hidden-xs">
		<img id="img_identity" src="#empty" alt="Identity" class="img-responsive">
	</div><!-- /.col-sm-3 -->
	<div class="col-sm-9">
		<h4 id="identity">Identity</h4>
		<div id="influence"></div>
		<div id="agendapoints"></div>
		<div id="cardcount"></div>
		<div id="latestpack"></div>
	</div><!-- /.col-sm-9 -->
</div><!-- /.row -->
<!-- Identity and Stats -->

<!-- Deck Content -->
<div class="row" id="deck-content" style="margin-bottom:1em;min-height:300px">
</div><!-- /#deck-content -->
<!-- Deck Content -->
</div>

{% include 'AppBundle:Builder:table-suggestions.html.twig' %}

<form method="POST" action="{{ path('deck_save') }}" id="save_form" role="form" style="margin-bottom:1em">
	<input type="hidden" id="deck-save-id" name="id" value="{{ deck.id }}">
	<input type="hidden" id="deck-save-as-copy" name="copy" value="0">
	<input type="hidden" id="deck-cancel-edits" name="cancel_edits" value="0">
	<input type="hidden" name="content">
	<input type="hidden" name="description">
	<input type="hidden" name="tags">
		<div class="form-group">
			<label for="name">Name</label>
			<input type="text" class="form-control decklist-name" name="name" value="{{ deck.name }}">
		</div>
	<button type="submit" class="btn btn-warning">Save</button>
	<button type="submit" id="btn-save-as-copy" class="btn btn-default">Save as Copy</button>
	<button type="submit" id="btn-cancel-edits" class="btn btn-link">Cancel edits</button>
</form>

</div><!-- /#deck -->
<!-- Left-side Column -->

<!-- Right-side Column -->
<div class="col-md-6">
	<div role="tabpanel">
	  <ul class="nav nav-tabs" role="tablist">
	    <li role="presentation" class="active"><a href="#tab-pane-build" aria-controls="tab-pane-build" role="tab" data-toggle="tab">Build</a></li>
	    <li role="presentation"><a href="#tab-pane-infos" aria-controls="tab-pane-infos" role="tab" data-toggle="tab">Notes</a></li>
	    <li role="presentation"><a href="#tab-pane-check" aria-controls="tab-pane-check" role="tab" data-toggle="tab">Check</a></li>
	    <li role="presentation"><a href="#tab-pane-history" aria-controls="tab-pane-history" role="tab" data-toggle="tab" id="tab-header-history">History</a></li>
	   </ul>
	  <div class="tab-content">
	  	<div role="tabpanel" class="tab-pane active" id="tab-pane-build">
	  	{% include 'AppBundle:Builder:tab-pane-build.html.twig' %}
	  	</div>
		<div role="tabpanel" class="tab-pane" id="tab-pane-check">
		{% include 'AppBundle:Builder:tab-pane-check.html.twig' %}
		</div>
	    <div role="tabpanel" class="tab-pane" id="tab-pane-infos">
	    {% include 'AppBundle:Builder:tab-pane-infos.html.twig' %}
	    </div>
	    <div role="tabpanel" class="tab-pane" id="tab-pane-history">
	    {% include 'AppBundle:Builder:tab-pane-history.html.twig' %}
	    </div>
	  </div>
	</div>
</div>
<!-- Right-side Column -->
	
</div><!-- .row -->
</div><!-- .container -->

{% include 'AppBundle:Modale:odds.html.twig' %}

{% endblock %}